import{_ as t,a as e,b as n}from"./tslib.es6-6e0f8414.js";import{i as r}from"./tauri-c3f7456b.js";var o;!function(t){t[t.JSON=1]="JSON",t[t.Text=2]="Text",t[t.Binary=3]="Binary"}(o||(o={}));var i=function(){function t(t,e){this.type=t,this.payload=e}return t.form=function(e){var n={};for(var r in e){var o=e[r];n[r]="string"==typeof o?o:Array.from(o)}return new t("Form",n)},t.json=function(e){return new t("Json",e)},t.text=function(e){return new t("Text",e)},t.bytes=function(e){return new t("Bytes",Array.from(e))},t}(),s=function(t){this.url=t.url,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.headers=t.headers,this.rawHeaders=t.rawHeaders,this.data=t.data},u=function(){function i(t){this.id=t}return i.prototype.drop=function(){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,r({__tauriModule:"Http",message:{cmd:"dropClient",client:this.id}})]}))}))},i.prototype.request=function(n){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){return(t=!n.responseType||n.responseType===o.JSON)&&(n.responseType=o.Text),[2,r({__tauriModule:"Http",message:{cmd:"httpRequest",client:this.id,options:n}}).then((function(e){var n=new s(e);if(t){try{n.data=JSON.parse(n.data)}catch(t){if(n.ok&&""===n.data)n.data={};else if(n.ok)throw Error("Failed to parse response `".concat(n.data,"` as JSON: ").concat(t,";\n              try setting the `responseType` option to `ResponseType.Text` or `ResponseType.Binary` if the API does not return a JSON response."))}return n}return n}))]}))}))},i.prototype.get=function(r,o){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,this.request(n({method:"GET",url:r},o))]}))}))},i.prototype.post=function(r,o,i){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,this.request(n({method:"POST",url:r,body:o},i))]}))}))},i.prototype.put=function(r,o,i){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,this.request(n({method:"PUT",url:r,body:o},i))]}))}))},i.prototype.patch=function(r,o){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,this.request(n({method:"PATCH",url:r},o))]}))}))},i.prototype.delete=function(r,o){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,this.request(n({method:"DELETE",url:r},o))]}))}))},i}();function a(n){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,r({__tauriModule:"Http",message:{cmd:"createClient",options:n}}).then((function(t){return new u(t)}))]}))}))}var c=null;function d(r,o){var i;return t(this,void 0,void 0,(function(){return e(this,(function(t){switch(t.label){case 0:return null!==c?[3,2]:[4,a()];case 1:c=t.sent(),t.label=2;case 2:return[2,c.request(n({url:r,method:null!==(i=null==o?void 0:o.method)&&void 0!==i?i:"GET"},o))]}}))}))}var h=Object.freeze({__proto__:null,getClient:a,fetch:d,Body:i,Client:u,Response:s,get ResponseType(){return o}});export{i as B,u as C,s as R,o as a,d as f,a as g,h};
